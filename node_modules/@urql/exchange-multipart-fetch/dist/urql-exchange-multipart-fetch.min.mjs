import{share as n,mergeMap as r,filter as t,onPush as e,takeUntil as o,merge as i}from"wonka";import{extractFiles as a}from"extract-files";import{makeFetchBody as u,makeFetchURL as f,makeFetchOptions as c,makeFetchSource as p}from"@urql/core/internal";function d(){return(d=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n}).apply(this,arguments)}function s(s){var y=s.forward;return function(s){var l=n(s),m=r((function(n){var r,i,s=t((function(r){return"teardown"===r.kind&&r.key===n.key}))(l),y=a(d({},n.variables)),m=y.files,v=u({query:n.query,variables:y.clone});if(m.size){r=f(n),"application/json"===(i=c(n)).headers["content-type"]&&delete i.headers["content-type"],i.method="POST",i.body=new FormData,i.body.append("operations",JSON.stringify(v));var b={},h=0;m.forEach((function(n){b[++h]=n.map((function(n){return"variables."+n}))})),i.body.append("map",JSON.stringify(b)),h=0,m.forEach((function(n,r){i.body.append(""+ ++h,r,r.name)}))}else i=c(n,v),r=f(n,v);return e((function(n){}))(o(s)(p(n,r,i)))}))(t((function(n){return"query"===n.kind||"mutation"===n.kind}))(l)),v=y(t((function(n){return"query"!==n.kind&&"mutation"!==n.kind}))(l));return i([m,v])}}export{s as multipartFetchExchange};
//# sourceMappingURL=urql-exchange-multipart-fetch.min.mjs.map
